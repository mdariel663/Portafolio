---
import projects from './data/projects.json';
import ProjectModal from './components/ProjectModal.astro';
const openModal = (project) => {
  const modalRoot = document.getElementById('modal-root');
  modalRoot.innerHTML = `
    <div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
      <div class="bg-white p-6 rounded-lg w-11/12 md:w-1/2 relative">
        <button class="absolute top-2 right-2 text-gray-600" onclick="closeModal()">âœ–</button>
        <h2 class="text-3xl font-bold mb-4">${project.title}</h2>
        <p class="mb-4">${project.description}</p>
        <div class="grid grid-cols-1 gap-4">
          ${project.images.map((image, index) => `<img src="${image}" alt="Capture ${index + 1}" class="w-full h-auto object-cover rounded-md" />`).join('')}
        </div>
      </div>
    </div>
  `;
};

const closeModal = () => {
  document.getElementById('modal-root').innerHTML = '';
};
---

<style>
.project-image {
  width: 100%;
  height: 150px;
  object-fit: cover;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
  transition: transform 0.3s ease;
}

.project-image:hover {
  transform: scale(1.05);
}

.project-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 150px;
  background-color: #e0e0e0;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
  color: #757575;
}

.project-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #333;
  margin-top: 0.5rem;
}

.project-description {
  font-size: 1rem;
  color: #666;
  margin-top: 0.25rem;
}

.project-link {
  margin-top: 1rem;
  color: #1d4ed8;
  transition: color 0.3s ease;
}

.project-link:hover {
  color: #1e3a8a;
}

.carousel-container {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
}

.carousel-item {
  flex: 0 0 auto;
  width: calc(100% / 3 - 1rem);
  margin-right: 1rem;
  scroll-snap-align: start;
  transition: transform 0.3s ease;
}

.carousel-item:hover {
  transform: scale(1.05);
}
</style>

<section id="proyects" class="container mx-auto py-16 px-4 md:px-0">
  <h2 class="text-center text-4xl font-bold mb-8">Proyectos</h2>

  <div class="carousel-container">
    {projects.map((project) => (
      <div
        key={project.title}
        class="carousel-item bg-white shadow-lg rounded-lg p-6 cursor-pointer"
        onClick={() => openModal(project)}
      >
        {project.imageUrl ? (
          <img src={project.imageUrl} alt={project.title} class="project-image" />
        ) : (
          <div class="project-placeholder">Oops! Foto no encontrada. ðŸ˜…</div>
        )}
        <h3 class="project-title">{project.title}</h3>
        <p class="project-description">{project.description}</p>
      </div>
    ))}
  </div>
</section>

<div id="modal-root"></div>

<script>
const openModal = (project) => {
  const modalRoot = document.getElementById('modal-root');
  modalRoot.innerHTML = `
    <div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
      <div class="bg-white p-6 rounded-lg w-11/12 md:w-1/2 relative">
        <button class="absolute top-2 right-2 text-gray-600" onclick="closeModal()">âœ–</button>
        <h2 class="text-3xl font-bold mb-4">${project.title}</h2>
        <p class="mb-4">${project.description}</p>
        <div class="grid grid-cols-1 gap-4">
          ${project.images.map((image, index) => `<img src="${image}" alt="Capture ${index + 1}" class="w-full h-auto object-cover rounded-md" />`).join('')}
        </div>
      </div>
    </div>
  `;
};

const closeModal = () => {
  document.getElementById('modal-root').innerHTML = '';
};
</script>
